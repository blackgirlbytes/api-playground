<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸš€ API Adventure Playground - Test APIs Together!</title>
    <link rel="stylesheet" href="layout-system.css">
    <link rel="stylesheet" href="color-system.css">
    <link rel="stylesheet" href="interactive-animations.css">
    <link rel="stylesheet" href="typography-content-styling.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Legacy environment variables - now using unified color system */
        :root {
            /* Sky Colors - mapped to unified system */
            --sky-light: var(--sky-blue);
            --sky-deep: var(--sky-blue-dark);
            --cloud-color: var(--cloud-white-soft);
            --sun-color: var(--sandbox-yellow);
            --sun-rays: var(--safety-orange);
            
            /* Ground Colors - mapped to unified system */
            --grass-light: var(--grass-green-light);
            --grass-dark: var(--grass-green-dark);
            --dirt-path: var(--dirt-brown);
            
            /* Tree Colors - mapped to unified system */
            --tree-trunk: var(--swing-brown-dark);
            --tree-leaves: var(--grass-green);
            --tree-shadow: var(--shadow-medium);
            
            /* Environmental - mapped to unified system */
            --particle-color: var(--particle-light);
            --ambient-glow: var(--ambient-glow);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            /* Playground Sky Background with animated gradient */
            background: 
                /* Animated sun rays */
                radial-gradient(circle at 15% 5%, var(--sun-rays) 0%, transparent 15%),
                /* Sun */
                radial-gradient(circle at 15% 5%, var(--sun-color) 0%, transparent 8%),
                /* Detailed fluffy clouds - Cloud 2 */
                radial-gradient(ellipse 90px 45px at var(--cloud-x2, 60%) var(--cloud-y2, 25%), var(--cloud-color) 60%, transparent 100%),
                radial-gradient(ellipse 65px 35px at calc(var(--cloud-x2, 60%) - 4%) calc(var(--cloud-y2, 25%) - 2%), var(--cloud-color) 70%, transparent 100%),
                radial-gradient(ellipse 75px 40px at calc(var(--cloud-x2, 60%) + 3%) calc(var(--cloud-y2, 25%) - 1%), var(--cloud-color) 65%, transparent 100%),
                radial-gradient(ellipse 50px 25px at calc(var(--cloud-x2, 60%) + 1%) calc(var(--cloud-y2, 25%) + 3%), var(--cloud-color) 75%, transparent 100%),
                /* Detailed fluffy clouds - Cloud 3 */
                radial-gradient(ellipse 85px 50px at var(--cloud-x3, 80%) var(--cloud-y3, 15%), var(--cloud-color) 60%, transparent 100%),
                radial-gradient(ellipse 60px 30px at calc(var(--cloud-x3, 80%) - 3%) calc(var(--cloud-y3, 15%) - 1%), var(--cloud-color) 70%, transparent 100%),
                radial-gradient(ellipse 70px 35px at calc(var(--cloud-x3, 80%) + 2%) calc(var(--cloud-y3, 15%) - 2%), var(--cloud-color) 65%, transparent 100%),
                radial-gradient(ellipse 40px 20px at calc(var(--cloud-x3, 80%) + 4%) calc(var(--cloud-y3, 15%) + 1%), var(--cloud-color) 80%, transparent 100%),
                /* Detailed fluffy clouds - Cloud 5 (center high) */
                radial-gradient(ellipse 70px 40px at var(--cloud-x5, 45%) var(--cloud-y5, 8%), var(--cloud-color) 60%, transparent 100%),
                radial-gradient(ellipse 50px 25px at calc(var(--cloud-x5, 45%) - 3%) calc(var(--cloud-y5, 8%) - 1%), var(--cloud-color) 70%, transparent 100%),
                radial-gradient(ellipse 60px 30px at calc(var(--cloud-x5, 45%) + 2%) calc(var(--cloud-y5, 8%) - 2%), var(--cloud-color) 65%, transparent 100%),
                radial-gradient(ellipse 40px 18px at calc(var(--cloud-x5, 45%) + 4%) calc(var(--cloud-y5, 8%) + 1%), var(--cloud-color) 80%, transparent 100%),
                /* Detailed fluffy clouds - Cloud 6 (lower right area) */
                radial-gradient(ellipse 95px 50px at var(--cloud-x6, 85%) var(--cloud-y6, 45%), var(--cloud-color) 60%, transparent 100%),
                radial-gradient(ellipse 70px 40px at calc(var(--cloud-x6, 85%) - 4%) calc(var(--cloud-y6, 45%) - 2%), var(--cloud-color) 70%, transparent 100%),
                radial-gradient(ellipse 80px 35px at calc(var(--cloud-x6, 85%) + 3%) calc(var(--cloud-y6, 45%) - 1%), var(--cloud-color) 65%, transparent 100%),
                radial-gradient(ellipse 55px 30px at calc(var(--cloud-x6, 85%) + 1%) calc(var(--cloud-y6, 45%) + 3%), var(--cloud-color) 75%, transparent 100%),
                radial-gradient(ellipse 45px 25px at calc(var(--cloud-x6, 85%) - 2%) calc(var(--cloud-y6, 45%) + 1%), var(--cloud-color) 80%, transparent 100%),
                /* Sky gradient */
                linear-gradient(180deg, var(--sky-light) 0%, var(--sky-deep) 100%);
            
            /* Animated cloud positions - moved leftmost cloud away from sun */
            --cloud-x: 35%;
            --cloud-y: 35%;
            --cloud-x2: 60%;
            --cloud-y2: 25%;
            --cloud-x3: 80%;
            --cloud-y3: 15%;
            --cloud-x4: 15%;
            --cloud-y4: 12%;
            --cloud-x5: 45%;
            --cloud-y5: 8%;
            --cloud-x6: 85%;
            --cloud-y6: 45%;
            
            animation: 
                skyAnimation 20s ease-in-out infinite,
                cloudDrift 30s linear infinite;
            
            min-height: 100vh;
            color: #333;
            position: relative;
            overflow-x: hidden;
        }

        /* Ground layer with grass texture */
        body::before {
            content: '';
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 120px;
            background: 
                /* Grass blades pattern */
                repeating-linear-gradient(
                    90deg,
                    var(--grass-light) 0px,
                    var(--grass-dark) 2px,
                    var(--grass-light) 4px
                ),
                /* Base grass color */
                linear-gradient(0deg, var(--grass-dark) 0%, var(--grass-light) 100%);
            z-index: -2;
            animation: grassSway 3s ease-in-out infinite alternate;
        }

        /* Dirt path elements */
        body::after {
            content: '';
            position: fixed;
            bottom: 0;
            left: 20%;
            right: 20%;
            height: 40px;
            background: 
                radial-gradient(ellipse at center, var(--dirt-path) 60%, transparent 80%),
                repeating-linear-gradient(
                    45deg,
                    var(--dirt-path) 0px,
                    #C19A6B 1px,
                    var(--dirt-path) 3px
                );
            border-radius: 20px 20px 0 0;
            z-index: -1;
            opacity: 0.8;
        }

        /* Tree elements */
        .tree {
            position: fixed;
            bottom: 120px;
            z-index: -1;
            animation: treeGentle 6s ease-in-out infinite;
        }

        .tree-left {
            left: 5%;
            transform: scale(1.2);
        }

        .tree-right {
            right: 8%;
            transform: scale(0.9);
        }

        .tree-trunk {
            width: 20px;
            height: 80px;
            background: linear-gradient(180deg, var(--tree-trunk) 0%, #654321 100%);
            border-radius: 10px;
            position: relative;
            margin: 0 auto;
        }

        .tree-leaves {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, var(--tree-leaves) 40%, #228B22 100%);
            border-radius: 50%;
            position: absolute;
            top: -60px;
            left: -40px;
            animation: leavesRustle 4s ease-in-out infinite;
        }

        .tree-leaves::before {
            content: '';
            position: absolute;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #90EE90 40%, var(--tree-leaves) 100%);
            border-radius: 50%;
            top: -20px;
            left: -10px;
            animation: leavesRustle 3s ease-in-out infinite reverse;
        }

        .tree-leaves::after {
            content: '';
            position: absolute;
            width: 70px;
            height: 70px;
            background: radial-gradient(circle, #32CD32 40%, #228B22 100%);
            border-radius: 50%;
            top: -15px;
            right: -15px;
            animation: leavesRustle 5s ease-in-out infinite;
        }

        .tree-shadow {
            position: absolute;
            bottom: -10px;
            left: -30px;
            width: 80px;
            height: 20px;
            background: var(--tree-shadow);
            border-radius: 50%;
            animation: shadowMove 20s ease-in-out infinite;
        }

        /* Flower sprites scattered throughout */
        .flower {
            position: fixed;
            bottom: 130px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            z-index: -1;
            animation: flowerBob 3s ease-in-out infinite;
        }

        .flower-1 {
            left: 15%;
            background: #FF69B4;
            animation-delay: 0s;
        }

        .flower-2 {
            left: 25%;
            background: #FFB6C1;
            animation-delay: 0.5s;
        }

        .flower-3 {
            right: 25%;
            background: #FFA500;
            animation-delay: 1s;
        }

        .flower-4 {
            right: 35%;
            background: #FF6347;
            animation-delay: 1.5s;
        }

        .flower-5 {
            left: 45%;
            background: #FF1493;
            animation-delay: 2s;
        }

        /* Particle effects for ambiance */
        .particle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: var(--particle-color);
            border-radius: 50%;
            pointer-events: none;
            z-index: -1;
            animation: particleFloat 15s linear infinite;
        }

        .particle:nth-child(1) { left: 10%; animation-delay: 0s; }
        .particle:nth-child(2) { left: 20%; animation-delay: 2s; }
        .particle:nth-child(3) { left: 30%; animation-delay: 4s; }
        .particle:nth-child(4) { left: 40%; animation-delay: 6s; }
        .particle:nth-child(5) { left: 50%; animation-delay: 8s; }
        .particle:nth-child(6) { left: 60%; animation-delay: 10s; }
        .particle:nth-child(7) { left: 70%; animation-delay: 12s; }
        .particle:nth-child(8) { left: 80%; animation-delay: 14s; }
        .particle:nth-child(9) { left: 90%; animation-delay: 16s; }

        /* Playground Environment Animations */
        @keyframes skyAnimation {
            0%, 100% { 
                filter: brightness(1) hue-rotate(0deg);
            }
            50% { 
                filter: brightness(1.1) hue-rotate(10deg);
            }
        }

        @keyframes cloudDrift {
            0% {
                --cloud-x: 35%;
                --cloud-x2: 60%;
                --cloud-x3: 80%;
            }
            33% {
                --cloud-x: 40%;
                --cloud-x2: 65%;
                --cloud-x3: 85%;
            }
            66% {
                --cloud-x: 30%;
                --cloud-x2: 55%;
                --cloud-x3: 75%;
            }
            100% {
                --cloud-x: 35%;
                --cloud-x2: 60%;
                --cloud-x3: 80%;
            }
        }

        @keyframes grassSway {
            0% { transform: skewX(0deg); }
            100% { transform: skewX(1deg); }
        }

        @keyframes sunPulse {
            0%, 100% { 
                transform: scale(1);
                filter: brightness(1);
            }
            50% { 
                transform: scale(1.05);
                filter: brightness(1.2);
            }
        }

        @keyframes sunRaysRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes treeGentle {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-2px) rotate(0.5deg); }
        }

        @keyframes leavesRustle {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.02) rotate(1deg); }
            75% { transform: scale(0.98) rotate(-1deg); }
        }

        @keyframes shadowMove {
            0%, 100% { transform: translateX(0px) scaleX(1); }
            50% { transform: translateX(5px) scaleX(1.1); }
        }

        @keyframes flowerBob {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-3px) scale(1.1); }
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) translateX(0px);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(20px);
                opacity: 0;
            }
        }

        /* Hover effects for grass interaction */
        .container:hover body::before {
            animation: grassSway 1s ease-in-out infinite alternate;
        }

        /* Day/Night cycle toggle */
        .night-mode {
            --sky-light: #2C3E50;
            --sky-deep: #34495E;
            --sun-color: #F39C12;
            --particle-color: rgba(255, 255, 255, 0.8);
        }

        .night-mode body {
            background: 
                /* Stars */
                radial-gradient(circle at 20% 20%, white 1px, transparent 2px),
                radial-gradient(circle at 80% 30%, white 1px, transparent 2px),
                radial-gradient(circle at 40% 40%, white 1px, transparent 2px),
                radial-gradient(circle at 60% 60%, white 1px, transparent 2px),
                radial-gradient(circle at 30% 80%, white 1px, transparent 2px),
                /* Moon instead of sun */
                radial-gradient(circle at 15% 5%, #F4F4F4 0%, transparent 8%),
                /* Night sky */
                linear-gradient(180deg, var(--sky-light) 0%, var(--sky-deep) 100%);
        }
        
        /* Animation for dynamic gradient */
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: var(--container-xl);
            margin: 0 auto;
            padding: var(--space-lg);
        }

        .header {
            text-align: center;
            margin: 24px 0 48px 0;
            background: transparent;
            padding: 40px 40px 48px;
            border-radius: 32px;
            box-shadow: none;
            border: none;
            position: relative;
            overflow: visible;
            z-index: 0;
            margin-top: 80px;
        }

        .main-content {
            margin-bottom: 30px;
        }

        .tab-navigation {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            justify-content: center;
            align-items: flex-end;
            padding: 20px 0;
            position: relative;
        }

        /* AUTHENTIC wooden playground sign styling */
        .tab-btn {
            position: relative;
            padding: 28px 48px 32px 48px; /* Increased padding for bigger buttons */
            border: none;
            outline: none; /* Remove focus outline */
            /* Matte wood color base - less shiny */
            background: 
                /* Subtle wood stain variations */
                linear-gradient(45deg, 
                    #6B4423 0%,   /* Darker, matte wood */
                    #8B5A2B 20%,  /* Medium brown */
                    #A0522D 40%,  /* Natural brown */
                    #8B5A2B 60%,  /* Medium brown */
                    #6B4423 80%,  /* Darker wood */
                    #5D3A1A 100% /* Deep wood */
                );
            /* Match the app's typography - consistent with the rest of the site */
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            font-size: clamp(1.4rem, 3.5vw, 1.8rem); /* Increased font size */
            font-weight: 700;
            color: #F4E4C1; /* Changed to light cream color for better visibility */
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 6px;
            /* Enhanced text shadow for better readability */
            text-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.8),
                1px 1px 2px rgba(0, 0, 0, 0.6),
                0px 0px 8px rgba(0, 0, 0, 0.3);
            /* Matte wood board depth and shadows */
            box-shadow: 
                0 6px 12px rgba(107, 68, 35, 0.5),
                0 3px 6px rgba(0, 0, 0, 0.4),
                inset 0 1px 0px rgba(160, 82, 45, 0.2),
                inset 0 -1px 0px rgba(0, 0, 0, 0.4),
                inset 1px 0 0px rgba(139, 90, 43, 0.3),
                inset -1px 0 0px rgba(93, 58, 26, 0.5);
            transform: perspective(500px) rotateX(3deg);
            transform-origin: bottom center;
            min-width: 220px; /* Increased minimum width */
            letter-spacing: 0.3px;
            border: 2px solid #5D3A1A;
        }

        /* Remove focus outline completely */
        .tab-btn:focus {
            outline: none !important;
            box-shadow: 
                0 6px 12px rgba(107, 68, 35, 0.5),
                0 3px 6px rgba(0, 0, 0, 0.4),
                inset 0 1px 0px rgba(160, 82, 45, 0.2),
                inset 0 -1px 0px rgba(0, 0, 0, 0.4),
                inset 1px 0 0px rgba(139, 90, 43, 0.3),
                inset -1px 0 0px rgba(93, 58, 26, 0.5);
        }

        /* Wooden post */
        .tab-btn::before {
            content: '';
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%) rotate(1deg);
            width: 18px;
            height: 40px;
            background: 
                linear-gradient(180deg, 
                    #8B4513 0%,
                    #654321 50%,
                    #5D4037 100%
                );
            border-radius: 0 0 9px 9px;
            box-shadow: 
                0 6px 12px rgba(0, 0, 0, 0.4),
                inset 1px 0 0 rgba(222, 184, 135, 0.2),
                inset -1px 0 0 rgba(0, 0, 0, 0.3);
            z-index: -1;
        }

        /* REALISTIC wood grain texture */
        .tab-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                /* Primary wood grain lines */
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    rgba(139, 69, 19, 0.4) 1px,
                    transparent 2px,
                    transparent 4px,
                    rgba(101, 67, 33, 0.3) 5px,
                    transparent 6px,
                    transparent 10px
                ),
                /* Secondary grain pattern */
                repeating-linear-gradient(
                    90deg,
                    transparent 0px,
                    rgba(160, 82, 45, 0.2) 1px,
                    transparent 2px,
                    transparent 15px
                ),
                /* Wood knots - realistic sizes and positions */
                radial-gradient(ellipse 20px 10px at 25% 30%, rgba(101, 67, 33, 0.7) 0%, rgba(139, 69, 19, 0.4) 40%, transparent 70%),
                radial-gradient(ellipse 15px 8px at 75% 70%, rgba(93, 64, 55, 0.6) 0%, rgba(101, 67, 33, 0.3) 50%, transparent 80%),
                radial-gradient(ellipse 12px 6px at 60% 15%, rgba(139, 69, 19, 0.5) 0%, rgba(160, 82, 45, 0.2) 60%, transparent 90%),
                /* Wood surface imperfections */
                radial-gradient(circle 2px at 15% 60%, rgba(0, 0, 0, 0.1) 0%, transparent 100%),
                radial-gradient(circle 1px at 85% 40%, rgba(0, 0, 0, 0.08) 0%, transparent 100%),
                radial-gradient(circle 1px at 40% 80%, rgba(0, 0, 0, 0.06) 0%, transparent 100%),
                /* Subtle wood fiber texture */
                repeating-linear-gradient(
                    2deg,
                    transparent 0px,
                    rgba(222, 184, 135, 0.1) 1px,
                    transparent 2px,
                    transparent 8px
                );
            border-radius: inherit;
            pointer-events: none;
            opacity: 1;
            z-index: -1; /* Move wooden texture behind button text */
        }

        /* Hover effects - sign creaking */
        .tab-btn:hover {
            transform: perspective(500px) rotateX(8deg) translateY(-3px);
            box-shadow: 
                0 12px 24px rgba(139, 69, 19, 0.5),
                0 6px 12px rgba(0, 0, 0, 0.3),
                inset 0 2px 0px rgba(255, 255, 255, 0.4),
                inset 0 -2px 0px rgba(139, 69, 19, 0.7),
                inset 2px 0 0px rgba(222, 184, 135, 0.5),
                inset -2px 0 0px rgba(160, 82, 45, 0.5);
            color: #FFFFFF; /* Changed to white for better visibility on hover */
            text-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.9),
                1px 1px 2px rgba(0, 0, 0, 0.7),
                0px 0px 10px rgba(0, 0, 0, 0.4);
        }

        /* Active state - matte pressed wood effect */
        .tab-btn.active {
            background: linear-gradient(135deg, 
                #5D3A1A 0%,     /* Deep wood */
                #6B4423 25%,    /* Darker brown */
                #8B5A2B 50%,    /* Medium brown */
                #6B4423 75%,    /* Darker brown */
                #5D3A1A 100%    /* Deep wood */
            );
            color: #E8D5B7;
            /* Matte pressed text - no glow */
            text-shadow: 
                1px 1px 2px rgba(0, 0, 0, 0.8),
                0px 1px 3px rgba(0, 0, 0, 0.6);
            transform: perspective(500px) rotateX(2deg) translateY(-2px);
            /* Matte pressed shadow - no glow */
            box-shadow: 
                0 4px 8px rgba(93, 58, 26, 0.6),
                0 2px 4px rgba(0, 0, 0, 0.5),
                inset 0 2px 0px rgba(139, 90, 43, 0.3),
                inset 0 -2px 0px rgba(0, 0, 0, 0.5),
                inset 2px 0 0px rgba(107, 68, 35, 0.4),
                inset -2px 0 0px rgba(93, 58, 26, 0.6);
        }

        /* Enhanced active hover - still matte */
        .tab-btn.active:hover {
            text-shadow: 
                1px 1px 2px rgba(0, 0, 0, 0.9),
                0px 1px 4px rgba(0, 0, 0, 0.7);
            box-shadow: 
                0 6px 12px rgba(93, 58, 26, 0.7),
                0 3px 6px rgba(0, 0, 0, 0.6),
                inset 0 2px 0px rgba(139, 90, 43, 0.4),
                inset 0 -2px 0px rgba(0, 0, 0, 0.6),
                inset 2px 0 0px rgba(107, 68, 35, 0.5),
                inset -2px 0 0px rgba(93, 58, 26, 0.7);
        }

        /* Wooden sign creaking animation */
        @keyframes woodenSignCreak {
            0%, 100% { transform: perspective(500px) rotateX(5deg) rotateZ(0deg); }
            25% { transform: perspective(500px) rotateX(6deg) rotateZ(0.5deg); }
            75% { transform: perspective(500px) rotateX(4deg) rotateZ(-0.5deg); }
        }

        .tab-btn:hover {
            animation: woodenSignCreak 2s ease-in-out infinite;
        }

        /* Removed grass around the sign posts */

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .tab-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .collaboration-panel-content {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.98) 0%, 
                rgba(248, 250, 252, 0.95) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 32px;
            padding: 48px 40px;
            box-shadow: 
                0 32px 64px rgba(0, 0, 0, 0.08),
                0 12px 32px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        /* Log Out Button - Top Right Corner */
        .log-out-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
            border: none;
            padding: 16px 28px;
            border-radius: 18px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            letter-spacing: 0.02em;
            /* Enhanced text depth - layered shadows for dimensional text */
            text-shadow: 
                0 1px 2px rgba(0, 0, 0, 0.4),           /* Close text shadow */
                0 2px 4px rgba(0, 0, 0, 0.25),          /* Mid-range text shadow */
                0 4px 8px rgba(0, 0, 0, 0.15);          /* Distant text shadow */
            /* Layered depth shadows - no glow, just physical depth */
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.15),           /* Close contact shadow */
                0 4px 8px rgba(0, 0, 0, 0.1),            /* Mid-range shadow */
                0 8px 16px rgba(0, 0, 0, 0.08),          /* Distant shadow */
                inset 0 1px 0 rgba(255, 255, 255, 0.2), /* Top highlight edge */
                inset 0 -1px 0 rgba(0, 0, 0, 0.1);       /* Bottom depth edge */
            z-index: 10;
            /* Subtle 3D transform for depth */
            transform: perspective(200px) rotateX(2deg);
        }

        .log-out-btn:hover {
            transform: perspective(200px) rotateX(2deg) translateY(-3px);
            /* Enhanced layered shadows on hover */
            box-shadow: 
                0 4px 8px rgba(0, 0, 0, 0.18),           /* Close contact shadow */
                0 8px 16px rgba(0, 0, 0, 0.12),          /* Mid-range shadow */
                0 16px 32px rgba(0, 0, 0, 0.1),          /* Distant shadow */
                inset 0 1px 0 rgba(255, 255, 255, 0.25), /* Top highlight edge */
                inset 0 -1px 0 rgba(0, 0, 0, 0.15);      /* Bottom depth edge */
            background: linear-gradient(135deg, #44a08d 0%, #3d8b7a 100%);
        }

        .log-out-btn:active {
            transform: perspective(200px) rotateX(1deg) translateY(-1px);
            /* Pressed state - closer to surface */
            box-shadow: 
                0 1px 2px rgba(0, 0, 0, 0.2),            /* Close contact shadow */
                0 2px 4px rgba(0, 0, 0, 0.15),           /* Mid-range shadow */
                0 4px 8px rgba(0, 0, 0, 0.1),            /* Distant shadow */
                inset 0 1px 0 rgba(255, 255, 255, 0.15), /* Top highlight edge */
                inset 0 -1px 0 rgba(0, 0, 0, 0.2);       /* Bottom depth edge */
        }

        .collaboration-panel-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                #4ecdc4 0%, 
                #44a08d 25%, 
                #667eea 50%, 
                #764ba2 75%, 
                #f093fb 100%);
            animation: shimmer 4s ease-in-out infinite;
        }

        .collaboration-panel-content h2 {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            color: #1a202c;
            margin-bottom: 40px;
            font-size: clamp(1.75rem, 4vw, 2.25rem);
            font-weight: 800;
            letter-spacing: -0.02em;
            display: flex;
            align-items: center;
            gap: 16px;
            line-height: 1.1;
        }

        .collaboration-panel-content h3 {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            color: #F4E4C1; /* Light cream color to match Clubhouse heading */
            margin: 32px 0 16px 0;
            font-size: clamp(1.25rem, 3vw, 1.5rem);
            font-weight: 700;
            letter-spacing: -0.01em;
            display: flex;
            align-items: center;
            gap: 12px;
            text-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.8),
                1px 1px 2px rgba(0, 0, 0, 0.6),
                0px 0px 8px rgba(0, 0, 0, 0.4);
        }

        /* Update playground equipment colors to use unified system */
        .slide-panel {
            background: var(--gradient-slide);
            border-radius: var(--radius-xl) var(--radius-xl) 120px 120px;
            padding: 40px 32px 60px;
            box-shadow: var(--shadow-slide-hover);
            border: none;
            position: relative;
            transform: perspective(1000px) rotateX(5deg);
        }

        .slide-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 20px;
            background: linear-gradient(135deg, var(--swing-brown) 0%, var(--swing-brown-light) 100%);
            border-radius: var(--radius-sm);
            box-shadow: inset 0 2px 4px var(--shadow-medium);
        }

        .slide-panel .form-group::after {
            content: '';
            position: absolute;
            left: -20px;
            right: -20px;
            bottom: -14px;
            height: 8px;
            background: linear-gradient(90deg, 
                var(--swing-brown) 0%, 
                var(--swing-brown-light) 50%, 
                var(--swing-brown) 100%);
            border-radius: var(--radius-xs);
            box-shadow: var(--shadow-sm), inset 0 1px 0 rgba(255,255,255,0.3);
        }

        .slide-panel:hover {
            transform: perspective(1000px) rotateX(8deg) translateY(-5px);
            box-shadow: var(--shadow-slide-hover);
        }

        /* BULLETIN BOARD PANEL - Response Display */
        .bulletin-board-panel {
            background: 
                /* Cork texture */
                radial-gradient(circle at 20% 30%, #D2B48C 1px, transparent 1px),
                radial-gradient(circle at 80% 70%, #DEB887 1px, transparent 1px),
                radial-gradient(circle at 40% 80%, #D2B48C 1px, transparent 1px),
                radial-gradient(circle at 60% 20%, #DEB887 1px, transparent 1px),
                /* Base cork color */
                linear-gradient(135deg, #D2B48C 0%, #DEB887 50%, #D2B48C 100%);
            background-size: 15px 15px, 20px 20px, 25px 25px, 18px 18px, 100% 100%;
            border-radius: var(--radius-lg);
            padding: 30px 25px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.15),
                inset 0 2px 4px rgba(255, 255, 255, 0.1),
                inset 0 -2px 4px rgba(0, 0, 0, 0.1);
            border: 8px solid #8B4513;
            position: relative;
            overflow: visible;
        }

        /* Wooden frame details */
        .bulletin-board-panel::before {
            content: '';
            position: absolute;
            top: -12px;
            left: -12px;
            right: -12px;
            bottom: -12px;
            background: 
                /* Wood grain */
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    rgba(139, 69, 19, 0.3) 1px,
                    transparent 2px,
                    transparent 8px
                );
            border-radius: var(--radius-lg);
            z-index: -1;
        }

        /* Corner brackets */
        .bulletin-board-panel::after {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            width: 20px;
            height: 20px;
            border-left: 3px solid #654321;
            border-top: 3px solid #654321;
            border-radius: 2px;
            box-shadow: 
                calc(100% - 40px) 0 0 0 #654321,
                calc(100% - 40px) 3px 0 0 #654321,
                0 calc(100% - 40px) 0 0 #654321,
                3px calc(100% - 40px) 0 0 #654321,
                calc(100% - 40px) calc(100% - 40px) 0 0 #654321,
                calc(100% - 37px) calc(100% - 40px) 0 0 #654321;
        }

        /* WOODEN COLLABORATION PANEL - Matching tab button style */
        .sandbox-panel {
            position: relative;
            padding: 40px 32px;
            border: none;
            outline: none;
            /* Matte wood color base - matching tab buttons */
            background: 
                /* Subtle wood stain variations */
                linear-gradient(45deg, 
                    #6B4423 0%,   /* Darker, matte wood */
                    #8B5A2B 20%,  /* Medium brown */
                    #A0522D 40%,  /* Natural brown */
                    #8B5A2B 60%,  /* Medium brown */
                    #6B4423 80%,  /* Darker wood */
                    #5D3A1A 100% /* Deep wood */
                );
            border-radius: 6px;
            /* Matte wood board depth and shadows */
            box-shadow: 
                0 6px 12px rgba(107, 68, 35, 0.5),
                0 3px 6px rgba(0, 0, 0, 0.4),
                inset 0 1px 0px rgba(160, 82, 45, 0.2),
                inset 0 -1px 0px rgba(0, 0, 0, 0.4),
                inset 1px 0 0px rgba(139, 90, 43, 0.3),
                inset -1px 0 0px rgba(93, 58, 26, 0.5);
            border: 2px solid #5D3A1A;
        }

        /* STRONG REALISTIC wood grain texture - full wooden vibe */
        .sandbox-panel::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                /* Primary wood grain lines - STRONG */
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    rgba(139, 69, 19, 0.4) 1px,
                    transparent 2px,
                    transparent 4px,
                    rgba(101, 67, 33, 0.3) 5px,
                    transparent 6px,
                    transparent 10px
                ),
                /* Secondary grain pattern - STRONG */
                repeating-linear-gradient(
                    90deg,
                    transparent 0px,
                    rgba(160, 82, 45, 0.2) 1px,
                    transparent 2px,
                    transparent 15px
                ),
                /* Wood knots - realistic sizes and positions - STRONG */
                radial-gradient(ellipse 20px 10px at 25% 30%, rgba(101, 67, 33, 0.7) 0%, rgba(139, 69, 19, 0.4) 40%, transparent 70%),
                radial-gradient(ellipse 15px 8px at 75% 70%, rgba(93, 64, 55, 0.6) 0%, rgba(101, 67, 33, 0.3) 50%, transparent 80%),
                radial-gradient(ellipse 12px 6px at 60% 15%, rgba(139, 69, 19, 0.5) 0%, rgba(160, 82, 45, 0.2) 60%, transparent 90%),
                /* Wood surface imperfections - STRONG */
                radial-gradient(circle 2px at 15% 60%, rgba(0, 0, 0, 0.1) 0%, transparent 100%),
                radial-gradient(circle 1px at 85% 40%, rgba(0, 0, 0, 0.08) 0%, transparent 100%),
                radial-gradient(circle 1px at 40% 80%, rgba(0, 0, 0, 0.06) 0%, transparent 100%),
                /* Subtle wood fiber texture - STRONG */
                repeating-linear-gradient(
                    2deg,
                    transparent 0px,
                    rgba(222, 184, 135, 0.1) 1px,
                    transparent 2px,
                    transparent 8px
                );
            border-radius: inherit;
            pointer-events: none;
            opacity: 1; /* Full strength wooden texture */
            z-index: -1; /* Move behind all content */
        }

        /* Remove wooden frame */
        .sandbox-panel::before {
            display: none;
        }

        /* SEESAW PANEL - Settings/Options */
        .seesaw-panel {
            background: var(--gradient-grass);
            border: 4px solid var(--swing-brown);
            border-radius: var(--radius-lg);
            padding: 40px 32px;
            position: relative;
            box-shadow: var(--shadow-grass-hover);
        }

        .seesaw-panel::before {
            content: '';
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 30px solid var(--swing-brown);
            box-shadow: var(--shadow-md);
        }

        .seesaw-panel .seesaw-board {
            position: absolute;
            bottom: 55px;
            left: 20px;
            right: 20px;
            height: 15px;
            background: var(--gradient-swing);
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-md), inset 0 2px 0 rgba(255,255,255,0.2);
            transform-origin: center center;
            animation: seesawTilt 6s ease-in-out infinite;
        }

        .seesaw-panel .seat-left {
            left: 10px;
            background: linear-gradient(135deg, var(--slide-red) 0%, var(--slide-red-light) 100%);
        }

        /* Add missing panel and form-group styles */
        .panel {
            position: relative;
            overflow: hidden;
            transition: all var(--transition-bounce);
        }

        .panel:hover {
            transform: translateY(-5px);
        }

        .slide-panel .form-group {
            position: relative;
            margin-bottom: 28px;
        }

        /* Slide surface texture */
        .slide-panel::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 2px,
                    rgba(255,255,255,0.1) 2px,
                    rgba(255,255,255,0.1) 4px
                );
            pointer-events: none;
            border-radius: inherit;
        }

        /* Whoosh animation */
        @keyframes whoosh {
            0% { transform: perspective(1000px) rotateX(5deg) translateY(0px); }
            50% { transform: perspective(1000px) rotateX(8deg) translateY(-10px); }
            100% { transform: perspective(1000px) rotateX(5deg) translateY(0px); }
        }

        .slide-panel.whoosh {
            animation: whoosh 0.8s ease-out;
        }

        /* Swing seat styling for response area */
        .swing-panel .response-area {
            background: linear-gradient(135deg, 
                var(--swing-brown) 0%, 
                var(--dirt-brown-light) 100%);
            border: 3px solid var(--swing-brown-dark);
            border-radius: var(--radius-lg);
            position: relative;
            margin-top: 30px;
            transform-origin: top center;
            animation: gentleSwing 4s ease-in-out infinite;
        }

        /* Chain links */
        .swing-panel .chain-left,
        .swing-panel .chain-right {
            position: absolute;
            top: -30px;
            width: 6px;
            height: 30px;
            background: repeating-linear-gradient(
                0deg,
                #666 0px,
                #666 3px,
                #999 3px,
                #999 6px
            );
            border-radius: var(--radius-xs);
        }

        .swing-panel .chain-left {
            left: 20px;
        }

        .swing-panel .chain-right {
            right: 20px;
        }

        @keyframes gentleSwing {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(2deg); }
            75% { transform: rotate(-2deg); }
        }

        .swing-panel:hover .response-area {
            animation: gentleSwing 2s ease-in-out infinite;
        }

        /* Sandy texture */
        .sandbox-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(255,193,7,0.3) 1px, transparent 1px),
                radial-gradient(circle at 80% 70%, rgba(255,235,59,0.3) 1px, transparent 1px),
                radial-gradient(circle at 40% 80%, rgba(255,213,79,0.3) 1px, transparent 1px);
            background-size: 15px 15px, 20px 20px, 25px 25px;
            pointer-events: none;
            border-radius: inherit;
        }

        .sandbox-panel .bucket-icon::before {
            content: '';
            position: absolute;
            top: -5px;
            left: 5px;
            right: 5px;
            height: 8px;
            background: linear-gradient(135deg, #666 0%, #999 100%);
            border-radius: var(--radius-xs);
        }

        .sandbox-panel .shovel-icon::before {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 15px;
            height: 12px;
            background: linear-gradient(135deg, #666 0%, #999 100%);
            border-radius: 0 0 var(--radius-sm) var(--radius-sm);
        }

        /* Sand castle elements */
        .sandbox-panel .castle {
            position: absolute;
            bottom: 20px;
            left: 30px;
            width: 60px;
            height: 40px;
        }

        .sandbox-panel .castle-tower {
            position: absolute;
            bottom: 0;
            background: linear-gradient(135deg, var(--dirt-brown-light) 0%, var(--dirt-brown) 100%);
            border-radius: var(--radius-xs) var(--radius-xs) 0 0;
            box-shadow: var(--shadow-sm);
        }

        .sandbox-panel .castle-tower:nth-child(1) {
            left: 0;
            width: 15px;
            height: 25px;
        }

        .sandbox-panel .castle-tower:nth-child(2) {
            left: 20px;
            width: 20px;
            height: 35px;
        }

        .sandbox-panel .castle-tower:nth-child(3) {
            right: 0;
            width: 15px;
            height: 20px;
        }

        /* Footprints around edges */
        .sandbox-panel .footprint {
            position: absolute;
            width: 12px;
            height: 8px;
            background: rgba(141, 110, 99, 0.3);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: inset 0 1px 2px var(--shadow-light);
        }

        .sandbox-panel .footprint:nth-of-type(1) { top: 80px; left: 20px; transform: rotate(15deg); }
        .sandbox-panel .footprint:nth-of-type(2) { top: 120px; left: 35px; transform: rotate(-10deg); }
        .sandbox-panel .footprint:nth-of-type(3) { bottom: 80px; right: 25px; transform: rotate(25deg); }
        .sandbox-panel .footprint:nth-of-type(4) { bottom: 120px; right: 40px; transform: rotate(-15deg); }

        /* Colorful seats */
        .seesaw-panel .seat-left,
        .seesaw-panel .seat-right {
            position: absolute;
            top: -15px;
            width: 40px;
            height: 25px;
            border-radius: var(--radius-lg) var(--radius-lg) 5px 5px;
            box-shadow: var(--shadow-md), inset 0 2px 0 rgba(255,255,255,0.3);
        }

        @keyframes seesawTilt {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }

        .seesaw-panel:hover .seesaw-board {
            animation: seesawTilt 3s ease-in-out infinite;
        }

        /* Enhanced panel hover effects using unified system */
        .sandbox-panel:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-sandbox-hover);
        }

        .seesaw-panel:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-grass-hover);
        }

        .panel h2 {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            color: #1a202c;
            margin-bottom: 32px;
            font-size: clamp(1.5rem, 3vw, 1.875rem);
            font-weight: 700;
            letter-spacing: -0.02em;
            display: flex;
            align-items: center;
            gap: 12px;
            line-height: 1.2;
        }

        /* Enhanced visibility for sandbox panel heading */
        .sandbox-panel h2 {
            color: #F4E4C1; /* Light cream color for better visibility */
            text-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.8),
                1px 1px 2px rgba(0, 0, 0, 0.6),
                0px 0px 8px rgba(0, 0, 0, 0.4);
            font-weight: 800;
        }

        .form-group {
            margin-bottom: 28px;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            font-weight: 600;
            color: #2d3748;
            font-size: clamp(1rem, 2vw, 1.125rem);
            letter-spacing: -0.01em;
            position: relative;
            z-index: 1; /* Ensure labels appear above wood texture */
        }

        /* Enhanced visibility for sandbox panel labels */
        .sandbox-panel .form-group label {
            color: #F4E4C1; /* Light cream color for better visibility */
            text-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.8),
                1px 1px 2px rgba(0, 0, 0, 0.6),
                0px 0px 8px rgba(0, 0, 0, 0.4);
            font-weight: 700;
            position: relative;
            z-index: 1;
        }

        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            font-size: 16px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(8px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
            position: relative;
            z-index: 2; /* Ensure form controls appear above wood texture */
        }

        /* Enhanced visibility for sandbox panel form controls */
        .sandbox-panel .form-control {
            background: rgba(255, 255, 255, 0.95); /* More opaque background */
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            position: relative;
            z-index: 2;
        }

        .sandbox-panel .form-control:focus {
            background: rgba(255, 255, 255, 1);
            border-color: #667eea;
            box-shadow: 
                0 0 0 4px rgba(102, 126, 234, 0.15),
                0 8px 24px rgba(102, 126, 234, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 1);
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 
                0 0 0 4px rgba(102, 126, 234, 0.08),
                0 4px 12px rgba(102, 126, 234, 0.15);
            transform: translateY(-1px);
            background: rgba(255, 255, 255, 0.95);
        }

        .form-control::placeholder {
            color: #94a3b8;
            font-weight: 400;
        }

        .method-selector {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .method-btn {
            padding: 12px 24px;
            border: 2px solid #e2e8f0;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            letter-spacing: -0.01em;
            position: relative;
            overflow: hidden;
        }
        
        .method-btn.playground-button {
            position: relative;
            overflow: hidden;
        }
        
        .method-btn.playground-button .sound-indicator {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, #fff 40%, transparent 70%);
            border-radius: 50%;
            opacity: 0;
            transform: scale(0);
            pointer-events: none;
        }

        .method-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }

        .method-btn:hover::before {
            left: 100%;
        }

        .method-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
            box-shadow: 
                0 8px 24px rgba(102, 126, 234, 0.25),
                0 4px 12px rgba(118, 75, 162, 0.15);
        }

        .method-btn:hover:not(.active) {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-color: #cbd5e0;
        }

        .headers-section {
            border: 2px dashed #cbd5e0;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            background: linear-gradient(135deg, 
                rgba(248, 250, 252, 0.8) 0%, 
                rgba(241, 245, 249, 0.6) 100%);
            backdrop-filter: blur(8px);
            transition: all 0.3s ease;
        }

        .headers-section:hover {
            border-color: #a0aec0;
            background: linear-gradient(135deg, 
                rgba(248, 250, 252, 0.9) 0%, 
                rgba(241, 245, 249, 0.8) 100%);
        }

        .header-row {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
            align-items: center;
        }

        .header-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            font-size: 14px;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
        }

        .header-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.08);
            background: rgba(255, 255, 255, 1);
        }

        .remove-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            color: white;
            border: none;
            border-radius: 12px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-btn:hover {
            transform: scale(1.05) rotate(90deg);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }

        .add-header-btn {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 16px;
            cursor: pointer;
            font-weight: 600;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            font-size: 14px;
            letter-spacing: -0.01em;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .add-header-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .add-header-btn:hover::before {
            left: 100%;
        }

        .add-header-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(78, 205, 196, 0.4);
        }

        .send-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            color: white;
            border: none;
            padding: 20px 32px;
            border-radius: 24px;
            font-size: clamp(1.125rem, 2.5vw, 1.25rem);
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            margin-top: 32px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            letter-spacing: -0.01em;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
        }

        .send-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .send-btn:hover::before {
            left: 100%;
        }

        .send-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 16px 48px rgba(102, 126, 234, 0.4);
        }

        .send-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);
        }

        .response-area {
            background: linear-gradient(135deg, 
                rgba(248, 250, 252, 0.98) 0%, 
                rgba(241, 245, 249, 0.95) 100%);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 2px solid rgba(226, 232, 240, 0.6);
            border-radius: 24px;
            padding: 0;
            min-height: 400px;
            position: relative;
            transition: all 0.3s ease;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .response-area:hover {
            border-color: rgba(102, 126, 234, 0.4);
            background: linear-gradient(135deg, 
                rgba(248, 250, 252, 1) 0%, 
                rgba(241, 245, 249, 0.98) 100%);
            transform: translateY(-1px);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.08),
                0 8px 24px rgba(0, 0, 0, 0.04);
        }

        .response-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(102, 126, 234, 0.3) 25%,
                rgba(118, 75, 162, 0.3) 50%,
                rgba(240, 147, 251, 0.3) 75%,
                transparent 100%);
            animation: shimmer 3s ease-in-out infinite;
        }

        .response-header {
            padding: 24px 28px 0 28px;
            border-bottom: 1px solid rgba(226, 232, 240, 0.3);
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.9) 0%, 
                rgba(248, 250, 252, 0.8) 100%);
            position: relative;
        }

        .response-content {
            flex: 1;
            padding: 24px 28px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .response-content::-webkit-scrollbar {
            width: 8px;
        }

        .response-content::-webkit-scrollbar-track {
            background: rgba(241, 245, 249, 0.5);
            border-radius: 4px;
        }

        .response-content::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 4px;
        }

        .response-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5a67d8, #6b46c1);
        }

        .response-section {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(226, 232, 240, 0.4);
            border-radius: 16px;
            padding: 20px;
            position: relative;
            transition: all 0.3s ease;
        }

        .response-section:hover {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(102, 126, 234, 0.3);
            transform: translateY(-1px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.04);
        }

        .response-section h4 {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: #1a202c;
            margin: 0 0 16px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            letter-spacing: -0.01em;
        }

        .response-data-container {
            background: linear-gradient(135deg, 
                rgba(248, 250, 252, 0.9) 0%, 
                rgba(241, 245, 249, 0.8) 100%);
            border: 1px solid rgba(226, 232, 240, 0.5);
            border-radius: 12px;
            padding: 0;
            overflow: hidden;
            position: relative;
        }

        .response-data-header {
            background: linear-gradient(135deg, 
                rgba(102, 126, 234, 0.1) 0%, 
                rgba(118, 75, 162, 0.1) 100%);
            padding: 12px 16px;
            border-bottom: 1px solid rgba(226, 232, 240, 0.3);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .response-data {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Consolas', monospace;
            font-size: 13px;
            line-height: 1.6;
            color: #2d3748;
            padding: 20px;
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-x: auto;
            background: transparent;
            border: none;
            max-height: 300px;
            overflow-y: auto;
        }

        .response-data::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        .response-data::-webkit-scrollbar-track {
            background: rgba(241, 245, 249, 0.5);
            border-radius: 3px;
        }

        .response-data::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #cbd5e0, #a0aec0);
            border-radius: 3px;
        }

        .response-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 16px;
        }

        .response-meta-item {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.9) 0%, 
                rgba(248, 250, 252, 0.8) 100%);
            border: 1px solid rgba(226, 232, 240, 0.4);
            border-radius: 12px;
            padding: 8px 12px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            font-size: 12px;
            font-weight: 600;
            color: #4a5568;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .welcome-message {
            text-align: center;
            padding: 40px 20px;
            color: #64748b;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
        }

        .welcome-message h3 {
            font-size: 20px;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .welcome-message p {
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 24px;
        }

        .example-apis {
            display: grid;
            gap: 12px;
            margin-top: 20px;
        }

        .example-api {
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(226, 232, 240, 0.4);
            border-radius: 12px;
            padding: 12px 16px;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Consolas', monospace;
            font-size: 12px;
            color: #4a5568;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .example-api:hover {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(102, 126, 234, 0.3);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);
        }

        .collaborative-response-header {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 14px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            letter-spacing: -0.01em;
            display: flex;
            flex-direction: column;
            gap: 4px;
            box-shadow: 0 8px 24px rgba(78, 205, 196, 0.25);
        }

        .collaborative-response-header .user-info {
            font-size: 16px;
            font-weight: 700;
        }

        .collaborative-response-header .request-info {
            font-size: 13px;
            opacity: 0.9;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            letter-spacing: -0.01em;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .status-success {
            background: linear-gradient(135deg, 
                rgba(198, 246, 213, 0.9) 0%, 
                rgba(187, 247, 208, 0.8) 100%);
            color: #22543d;
            border: 1px solid rgba(34, 84, 61, 0.2);
        }

        .status-error {
            background: linear-gradient(135deg, 
                rgba(254, 215, 215, 0.9) 0%, 
                rgba(252, 165, 165, 0.8) 100%);
            color: #742a2a;
            border: 1px solid rgba(116, 42, 42, 0.2);
        }

        .collaboration-panel {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.98) 0%, 
                rgba(248, 250, 252, 0.95) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 32px;
            padding: 48px 40px;
            box-shadow: 
                0 32px 64px rgba(0, 0, 0, 0.08),
                0 12px 32px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
            margin-top: 24px;
        }

        .collaboration-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                #4ecdc4 0%, 
                #44a08d 25%, 
                #667eea 50%, 
                #764ba2 75%, 
                #f093fb 100%);
            animation: shimmer 4s ease-in-out infinite;
        }

        .collaboration-panel h2 {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            color: #1a202c;
            margin-bottom: 40px;
            font-size: clamp(1.75rem, 4vw, 2.25rem);
            font-weight: 800;
            letter-spacing: -0.02em;
            display: flex;
            align-items: center;
            gap: 16px;
            line-height: 1.1;
        }

        .collaboration-panel h3 {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            color: #2d3748;
            margin: 32px 0 16px 0;
            font-size: clamp(1.25rem, 3vw, 1.5rem);
            font-weight: 700;
            letter-spacing: -0.01em;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .users-online {
            display: flex;
            gap: 16px;
            margin-bottom: 32px;
            flex-wrap: wrap;
            padding: 20px;
            background: linear-gradient(135deg, 
                rgba(241, 245, 249, 0.6) 0%, 
                rgba(248, 250, 252, 0.4) 100%);
            border-radius: 20px;
            border: 1px solid rgba(226, 232, 240, 0.4);
        }

        /* WOODEN NAME TAGS - Simple matte wooden rectangles */
        .user-badge {
            position: relative;
            padding: 12px 18px;
            border: none;
            outline: none;
            /* Matte wood - no shine, matching tab buttons */
            background: 
                linear-gradient(135deg, 
                    #6B4423 0%,   /* Darker, matte wood */
                    #8B5A2B 50%,  /* Medium brown */
                    #6B4423 100%  /* Darker wood */
                );
            color: #F4E4C1; /* Light cream text - same as tab buttons */
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 0.3px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-radius: 8px; /* More rectangular, less round */
            /* Simple matte wood shadows - no shine */
            box-shadow: 
                0 3px 6px rgba(107, 68, 35, 0.4),
                0 1px 3px rgba(0, 0, 0, 0.3),
                inset 0 1px 0px rgba(139, 90, 43, 0.2),
                inset 0 -1px 0px rgba(93, 58, 26, 0.5);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #5D3A1A;
            /* Strong text shadow for readability */
            text-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.8),
                1px 1px 2px rgba(0, 0, 0, 0.6);
        }

        /* Simple wood grain - no leather texture */
        .user-badge::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                /* Simple wood grain lines */
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    rgba(139, 69, 19, 0.2) 1px,
                    transparent 2px,
                    transparent 6px
                );
            border-radius: inherit;
            pointer-events: none;
            opacity: 0.4; /* Subtle texture */
        }

        /* Simple hover effect - no shine */
        .user-badge:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 4px 8px rgba(107, 68, 35, 0.5),
                0 2px 4px rgba(0, 0, 0, 0.4),
                inset 0 1px 0px rgba(139, 90, 43, 0.3),
                inset 0 -1px 0px rgba(93, 58, 26, 0.6);
            /* Slightly lighter wood on hover */
            background: 
                linear-gradient(135deg, 
                    #8B5A2B 0%,   /* Medium brown */
                    #A0522D 50%,  /* Lighter brown */
                    #8B5A2B 100%  /* Medium brown */
                );
        }

        /* Special wooden prompt badge for "Enter your name above to join!" */
        .wooden-prompt-badge {
            position: relative;
            /* Use the same wooden background as the main panel */
            background: 
                linear-gradient(45deg, 
                    #6B4423 0%,   /* Darker, matte wood */
                    #8B5A2B 20%,  /* Medium brown */
                    #A0522D 40%,  /* Natural brown */
                    #8B5A2B 60%,  /* Medium brown */
                    #6B4423 80%,  /* Darker wood */
                    #5D3A1A 100% /* Deep wood */
                ) !important;
            color: #F4E4C1 !important; /* Light cream text */
            /* Enhanced text shadow for better readability */
            text-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.8),
                1px 1px 2px rgba(0, 0, 0, 0.6),
                0px 0px 8px rgba(0, 0, 0, 0.4) !important;
            z-index: 2; /* Ensure it appears above wood texture */
        }

        /* Apply the same wood grain texture to the prompt badge */
        .wooden-prompt-badge::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                /* Primary wood grain lines */
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    rgba(139, 69, 19, 0.4) 1px,
                    transparent 2px,
                    transparent 4px,
                    rgba(101, 67, 33, 0.3) 5px,
                    transparent 6px,
                    transparent 10px
                ),
                /* Secondary grain pattern */
                repeating-linear-gradient(
                    90deg,
                    transparent 0px,
                    rgba(160, 82, 45, 0.2) 1px,
                    transparent 2px,
                    transparent 15px
                ),
                /* Wood knots */
                radial-gradient(ellipse 15px 8px at 75% 70%, rgba(93, 64, 55, 0.6) 0%, rgba(101, 67, 33, 0.3) 50%, transparent 80%),
                radial-gradient(ellipse 12px 6px at 25% 30%, rgba(139, 69, 19, 0.5) 0%, rgba(160, 82, 45, 0.2) 60%, transparent 90%);
            border-radius: inherit;
            pointer-events: none;
            opacity: 0.6; /* Subtle texture */
            z-index: -1; /* Behind the text */
        }

        .activity-feed {
            background: linear-gradient(135deg, 
                rgba(248, 250, 252, 0.9) 0%, 
                rgba(241, 245, 249, 0.7) 100%);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 2px solid rgba(226, 232, 240, 0.5);
            border-radius: 20px;
            padding: 24px;
            max-height: 240px;
            overflow-y: auto;
            position: relative;
            margin-bottom: 32px;
        }

        .activity-feed::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(102, 126, 234, 0.3) 50%, 
                transparent 100%);
        }

        .activity-feed::-webkit-scrollbar {
            width: 6px;
        }

        .activity-feed::-webkit-scrollbar-track {
            background: rgba(241, 245, 249, 0.5);
            border-radius: 3px;
        }

        .activity-feed::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 3px;
        }

        .activity-feed::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5a67d8, #6b46c1);
        }

        .activity-item {
            padding: 16px 0;
            border-bottom: 1px solid rgba(226, 232, 240, 0.6);
            font-size: 16px; /* Increased from 14px */
            font-weight: 600; /* Increased from 500 */
            color: #1a202c; /* Changed from #4a5568 to much darker */
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            line-height: 1.6;
            transition: all 0.2s ease;
        }

        .activity-item:hover {
            color: #000000; /* Pure black on hover */
            background: rgba(255, 255, 255, 0.8);
            margin: 0 -12px;
            padding: 16px 12px;
            border-radius: 8px;
            font-weight: 700; /* Even bolder on hover */
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .collections-section {
            margin-top: 32px;
            padding-top: 32px;
            border-top: 2px dashed rgba(226, 232, 240, 0.6);
            position: relative;
        }

        .collections-section::before {
            content: '';
            position: absolute;
            top: -1px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 1px;
        }

        .collection-item {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.9) 0%, 
                rgba(248, 250, 252, 0.8) 100%);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 2px solid rgba(226, 232, 240, 0.5);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .collection-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.05), transparent);
            transition: left 0.6s;
        }

        .collection-item:hover::before {
            left: 100%;
        }

        .collection-item:hover {
            transform: translateY(-4px);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.08),
                0 8px 24px rgba(0, 0, 0, 0.04);
            border-color: rgba(102, 126, 234, 0.4);
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 1) 0%, 
                rgba(248, 250, 252, 0.95) 100%);
        }

        .collection-item strong {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: #1a202c;
            letter-spacing: -0.01em;
            display: block;
            margin-bottom: 8px;
        }

        .collection-item p {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            font-size: 14px;
            font-weight: 500;
            color: #64748b;
            line-height: 1.5;
            margin: 0;
        }

        .connection-status {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            z-index: 1000;
        }

        .connected {
            background: #c6f6d5;
            color: #22543d;
        }

        .disconnected {
            background: #fed7d7;
            color: #742a2a;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.8em;
            white-space: nowrap;
            z-index: 1000;
        }

        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }
            
            .header {
                padding: 48px 24px 40px;
                margin-bottom: 32px;
                border-radius: 24px;
            }
            
            .header h1 {
                font-size: clamp(2rem, 8vw, 2.5rem);
                margin-bottom: 16px;
            }
            
            .header p {
                font-size: clamp(1rem, 4vw, 1.125rem);
            }
            
            .tab-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .tab-navigation {
                flex-direction: column;
                gap: 4px;
            }
            
            .method-selector {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 40px 20px 32px;
                border-radius: 20px;
            }
            
            .header h1 {
                font-size: clamp(1.75rem, 10vw, 2rem);
                margin-bottom: 12px;
            }
            
            .header p {
                font-size: clamp(0.9rem, 4.5vw, 1rem);
                line-height: 1.5;
            }
            
            .tab-btn {
                padding: 12px 16px;
            }
        }
    </style>
</head>
<body>
    <!-- Playground Environment Elements -->
    
    <div class="tree tree-left">
        <div class="tree-trunk"></div>
        <div class="tree-leaves"></div>
        <div class="tree-shadow"></div>
    </div>
    
    <div class="tree tree-right">
        <div class="tree-trunk"></div>
        <div class="tree-leaves"></div>
        <div class="tree-shadow"></div>
    </div>
    
    <div class="flower flower-1"></div>
    <div class="flower flower-2"></div>
    <div class="flower flower-3"></div>
    <div class="flower flower-4"></div>
    <div class="flower flower-5"></div>
    
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    
    <!-- Butterflies for micro-animations -->
    <div class="butterfly butterfly-1">
        <div class="butterfly-body"></div>
    </div>
    <div class="butterfly butterfly-2">
        <div class="butterfly-body"></div>
    </div>
    <div class="butterfly butterfly-3">
        <div class="butterfly-body"></div>
    </div>
    
    <!-- Bird chirp indicator -->
    <div class="bird-chirp" id="birdChirp">ðŸ¦</div>

    <div class="container">
        <div class="header">
        </div>

        <div class="connection-status" id="connectionStatus">
            <span class="loading"></span> Connecting to the playground...
        </div>

        <div class="main-content">
            <!-- Tab Navigation -->
            <div class="tab-navigation">
                <button class="tab-btn active" data-tab="api-tab" onclick="switchTab('api-tab')">
                    API Testing
                </button>
                <button class="tab-btn" data-tab="collaboration-tab" onclick="switchTab('collaboration-tab')">
                    Collaboration
                </button>
            </div>

            <!-- API Tab Content -->
            <div id="api-tab" class="tab-content active">
                <div class="tab-grid">
                    <div class="panel slide-panel" id="slidePanel">
                        <h2 class="equipment-heading">ðŸ› Slide Down Your Request</h2>
                        
                        <div class="form-group">
                            <label class="tooltip instruction-text" data-tooltip="Choose how you want to talk to the API!">
                                ðŸŽ® Method (How to ask):
                            </label>
                            <div class="method-selector">
                                <button class="method-btn method-get playground-button bouncy-ball-btn active" data-method="GET">
                                    ðŸ§—â€â™€ï¸ GET
                                    <div class="sound-indicator"></div>
                                </button>
                                <button class="method-btn method-post playground-button toy-block-btn" data-method="POST">
                                    ðŸ› POST
                                    <div class="sound-indicator"></div>
                                </button>
                                <button class="method-btn method-put playground-button bouncy-ball-btn" data-method="PUT">
                                    ðŸ”§ PUT
                                    <div class="sound-indicator"></div>
                                </button>
                                <button class="method-btn method-delete playground-button toy-block-btn" data-method="DELETE">
                                    ðŸ—‘ï¸ DELETE
                                    <div class="sound-indicator"></div>
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="tooltip instruction-text" data-tooltip="The web address where the API lives!">
                                ðŸŒ URL (Where to go):
                            </label>
                            <input type="text" class="form-control sandbox-input" id="urlInput" 
                                   placeholder="https://api.example.com/data" 
                                   value="https://dog.ceo/api/breeds/image/random">
                        </div>

                        <div class="form-group">
                            <label class="tooltip instruction-text" data-tooltip="Extra information to send with your request!">
                                ðŸ“‹ Headers (Special instructions):
                            </label>
                            <div class="headers-section" id="headersSection">
                                <div class="header-row">
                                    <input type="text" class="header-input" placeholder="Header name (like Content-Type)" value="Content-Type">
                                    <input type="text" class="header-input" placeholder="Header value (like application/json)" value="application/json">
                                    <button class="remove-btn" onclick="removeHeader(this)">Ã—</button>
                                </div>
                            </div>
                            <button class="add-header-btn" onclick="addHeader()">âž• Add Header</button>
                        </div>

                        <div class="form-group">
                            <label class="tooltip instruction-text" data-tooltip="Data to send with POST/PUT requests!">
                                ðŸ“¦ Request Body (What to send):
                            </label>
                            <textarea class="form-control" id="bodyInput" rows="4" 
                                      placeholder='{"message": "Hello API!"}'></textarea>
                        </div>

                        <button class="send-btn" id="sendBtn" onclick="sendRequest()">
                            ðŸš€ Launch Request!
                        </button>
                    </div>

                    <div class="panel bulletin-board-panel" id="bulletinPanel">
                        <!-- Push pins -->
                        <div class="push-pin" style="position: absolute; top: 15px; left: 15px; width: 12px; height: 12px; background: #FF6B6B; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>
                        <div class="push-pin" style="position: absolute; top: 15px; right: 15px; width: 12px; height: 12px; background: #4ECDC4; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>
                        <div class="push-pin" style="position: absolute; bottom: 15px; left: 15px; width: 12px; height: 12px; background: #FFE66D; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>
                        <div class="push-pin" style="position: absolute; bottom: 15px; right: 15px; width: 12px; height: 12px; background: #A8E6CF; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>
                        
                        <h2 style="color: #8B4513; font-size: 2rem; font-weight: 800; text-align: center; margin-bottom: 20px; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">ðŸ“‹ Responses</h2>
                        <div class="response-area" id="responseArea">
                            <div class="response-content">
                                <div class="welcome-message">
                                    <h3 style="color: #8B4513; font-size: 1.5rem;">ðŸš€ Ready!</h3>
                                    <div class="example-apis">
                                        <div class="example-api" onclick="loadQuickExample('https://official-joke-api.appspot.com/random_joke')">
                                            ðŸ˜‚ Random Joke
                                        </div>
                                        <div class="example-api" onclick="loadQuickExample('https://catfact.ninja/fact')">
                                            ðŸ± Cat Fact
                                        </div>
                                        <div class="example-api" onclick="loadQuickExample('https://api.quotable.io/random')">
                                            ðŸ’­ Random Quote
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Collaboration Tab Content -->
            <div id="collaboration-tab" class="tab-content">
                <div class="collaboration-panel-content sandbox-panel">
                    <h2>Clubhouse</h2>
                    
                    <!-- Log Out Button - Top Right Corner -->
                    <button id="changeUserBtn" onclick="changeUser()" class="log-out-btn"
                            style="display: none;">
                        Log Out
                    </button>

                    <div class="form-group">
                        <label>ðŸ·ï¸ Your Name:</label>
                        <input type="text" class="form-control" id="usernameInput" 
                               placeholder="Enter your name to join the fun!" 
                               onchange="updateUsername()" 
                               oninput="updateUsername()">
                    </div>

                    <h3>ðŸŒŸ Who's Online:</h3>
                    <div class="users-online" id="usersOnline">
                        <div class="user-badge">
                            You (not connected yet)
                        </div>
                    </div>

                    <h3>ðŸ“º Live Activity Feed:</h3>
                    <div class="activity-feed" id="activityFeed">
                        <div class="activity-item">ðŸŽ‰ Welcome to the API Adventure Playground!</div>
                        <div class="activity-item">ðŸ’¡ Connect to see what others are doing!</div>
                        <div class="activity-item">ðŸš€ Try the example request to get started!</div>
                    </div>


                </div>
            </div>
        </div>
    </div>

    <script>
        // WebSocket connection
        let ws = null;
        let currentUser = null; // Start as null until user enters name
        let currentMethod = 'GET';
        let isConnected = false;
        let isUserRegistered = false;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            connectToServer();
            setupEventListeners();
            updateConnectionStatus('connecting');
            loadSavedUsername(); // Load saved username from localStorage
            updateUserRegistrationStatus(); // Initialize UI state
            
            // Add gentle movements to playground equipment
            setTimeout(() => {
                const slidePanel = document.getElementById('slidePanel');
                if (slidePanel) {
                    slidePanel.classList.add('gentle-sway');
                }
                
                const swingPanel = document.getElementById('swingPanel');
                if (swingPanel) {
                    swingPanel.classList.add('gentle-bob');
                }
                
                // Add light-up hover effects to all panels
                document.querySelectorAll('.panel').forEach(panel => {
                    panel.classList.add('light-up-hover');
                });
            }, 1000);
        });

        function loadSavedUsername() {
            // Try to load username from localStorage
            const savedUsername = localStorage.getItem('apiPlaygroundUsername');
            if (savedUsername && savedUsername.trim()) {
                const usernameInput = document.getElementById('usernameInput');
                usernameInput.value = savedUsername;
                
                // Set the user as registered
                currentUser = savedUsername;
                isUserRegistered = true;
                
                // Show welcome back message
                setTimeout(() => {
                    showUserFeedback(`ðŸ‘‹ Welcome back, ${currentUser}!`);
                }, 1000);
                
                // If connected, join the playground
                if (isConnected) {
                    sendMessage({
                        type: 'join',
                        username: currentUser
                    });
                }
                
                updateUserRegistrationStatus();
            }
        }

        function saveUsername(username) {
            // Save username to localStorage
            if (username && username.trim()) {
                localStorage.setItem('apiPlaygroundUsername', username.trim());
            }
        }

        function clearSavedUsername() {
            // Clear username from localStorage (for logout functionality)
            localStorage.removeItem('apiPlaygroundUsername');
        }

        function connectToServer() {
            try {
                ws = new WebSocket('ws://localhost:3001');
                
                ws.onopen = function() {
                    console.log('ðŸŽ‰ Connected to API Adventure Playground!');
                    isConnected = true;
                    updateConnectionStatus('connected');
                    
                    // Join the playground
                    sendMessage({
                        type: 'join',
                        username: currentUser
                    });
                };

                ws.onmessage = function(event) {
                    try {
                        const message = JSON.parse(event.data);
                        handleServerMessage(message);
                    } catch (error) {
                        console.error('Error parsing message:', error);
                    }
                };

                ws.onclose = function() {
                    console.log('ðŸ”Œ Disconnected from playground');
                    isConnected = false;
                    updateConnectionStatus('disconnected');
                    
                    // Try to reconnect after 3 seconds
                    setTimeout(connectToServer, 3000);
                };

                ws.onerror = function(error) {
                    console.error('WebSocket error:', error);
                    updateConnectionStatus('error');
                };

            } catch (error) {
                console.error('Failed to connect:', error);
                updateConnectionStatus('error');
            }
        }

        function sendMessage(message) {
            if (ws && ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify(message));
            }
        }

        function handleServerMessage(message) {
            switch (message.type) {
                case 'api_response':
                    displayResponse(message.response, message.timing);
                    addActivity(`ðŸŽ¯ ${message.userId} got a response from ${new URL(message.request.url).hostname}!`);
                    break;
                
                case 'api_request_executed':
                    // Show when other users make API requests and display their response
                    const statusEmoji = message.status >= 200 && message.status < 300 ? 'âœ…' : 'âŒ';
                    const hostname = new URL(message.url).hostname;
                    addActivity(`ðŸš€ ${message.userName} made a ${message.method} request to ${hostname} ${statusEmoji} (${message.status})`);
                    
                    // Also display the response in the response area for collaborative viewing
                    if (message.response) {
                        displayCollaborativeResponse(message.response, message.userName, message.method, hostname);
                    }
                    break;
                
                case 'user_joined':
                    addActivity(`ðŸ‘‹ ${message.username} joined the playground!`);
                    updateOnlineUsers(message.users);
                    break;
                
                case 'user_left':
                    addActivity(`ðŸ‘‹ ${message.username} left the playground!`);
                    updateOnlineUsers(message.users);
                    break;
                
                case 'activity_update':
                    addActivity(message.activity);
                    break;
                
                case 'error':
                    displayError(message.error, message.friendlyMessage);
                    break;
                
                case 'users_list':
                    updateOnlineUsers(message.users);
                    break;
            }
        }

        function setupEventListeners() {
            // Method selector buttons
            document.querySelectorAll('.method-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.method-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentMethod = this.dataset.method;
                });
            });

            // Enter key to send request
            document.getElementById('urlInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendRequest();
                }
            });
        }

        function sendRequest() {
            const url = document.getElementById('urlInput').value.trim();
            if (!url) {
                alert('ðŸŒ Please enter a URL first! It\'s like giving directions to the API!');
                return;
            }

            if (!isConnected) {
                showUserFeedback('ðŸ”Œ Not connected to the playground yet! Please wait a moment and try again!');
                return;
            }

            if (!isUserRegistered || !currentUser) {
                showUserFeedback('ðŸ‘‹ Please enter your name first to join the playground!');
                document.getElementById('usernameInput').focus();
                return;
            }

            const sendBtn = document.getElementById('sendBtn');
            const slidePanel = document.getElementById('slidePanel');
            
            sendBtn.disabled = true;
            sendBtn.innerHTML = '<span class="loading"></span> Launching...';
            
            // Add whoosh animation to slide panel
            slidePanel.classList.add('whoosh');
            setTimeout(() => {
                slidePanel.classList.remove('whoosh');
            }, 800);

            // Collect headers
            const headers = {};
            document.querySelectorAll('.header-row').forEach(row => {
                const inputs = row.querySelectorAll('.header-input');
                const name = inputs[0].value.trim();
                const value = inputs[1].value.trim();
                if (name && value) {
                    headers[name] = value;
                }
            });

            const request = {
                method: currentMethod,
                url: url,
                headers: headers,
                body: document.getElementById('bodyInput').value.trim() || undefined
            };

            // Send to server
            sendMessage({
                type: 'execute_api_request',
                request: request,
                userId: currentUser
            });

            // Add to activity
            addActivity(`ðŸš€ ${currentUser} launched a ${currentMethod} request to ${new URL(url).hostname}!`);

            // Reset button after 5 seconds
            setTimeout(() => {
                sendBtn.disabled = false;
                sendBtn.innerHTML = 'ðŸš€ Launch Request!';
            }, 5000);
        }

        function formatResponseData(data) {
            if (typeof data === 'string') {
                try {
                    data = JSON.parse(data);
                } catch (e) {
                    return data; // Return as-is if not valid JSON
                }
            }
            
            if (typeof data !== 'object' || data === null) {
                return String(data);
            }
            
            // Format as clean key-value pairs
            function formatObject(obj, indent = 0) {
                const spaces = '  '.repeat(indent);
                let result = '';
                
                for (const [key, value] of Object.entries(obj)) {
                    if (typeof value === 'object' && value !== null && !Array.isArray(value)) {
                        result += `${spaces}${key}:\n${formatObject(value, indent + 1)}`;
                    } else if (Array.isArray(value)) {
                        result += `${spaces}${key}: [${value.length} items]\n`;
                        value.forEach((item, index) => {
                            if (typeof item === 'object') {
                                result += `${spaces}  ${index + 1}.\n${formatObject(item, indent + 2)}`;
                            } else {
                                result += `${spaces}  ${index + 1}. ${item}\n`;
                            }
                        });
                    } else {
                        result += `${spaces}${key}: ${value}\n`;
                    }
                }
                
                return result;
            }
            
            return formatObject(data);
        }

        function displayResponse(response, timing) {
            const status = response.status;
            const isSuccess = status >= 200 && status < 300;
            
            // Use optimized animation queue system
            if (isSuccess) {
                queueAnimation(() => createSuccessParticles());
                queueAnimation(() => createConfetti());
                queueAnimation(() => createBalloons());
                queueAnimation(() => triggerBirdChirp());
            } else {
                // Trigger error animations with micro-interaction
                const slidePanel = document.getElementById('slidePanel');
                addMicroInteraction(slidePanel, 'shake');
                slidePanel.classList.add('sad-equipment');
                setTimeout(() => {
                    slidePanel.classList.remove('sad-equipment');
                }, 2000);
            }
            
            const statusClass = isSuccess ? 'status-success' : 'status-error';
            const statusEmoji = isSuccess ? 'ðŸŽ‰' : 'ðŸ˜…';
            
            // Create structured response content
            const responseContent = document.createElement('div');
            responseContent.className = 'response-content';
            
            // Status section
            const statusSection = document.createElement('div');
            statusSection.className = 'response-section';
            statusSection.innerHTML = `
                <h4>ðŸ“Š Response Status</h4>
                <div class="response-meta">
                    <div class="response-meta-item">
                        <span>${statusEmoji}</span>
                        <span>${status} - ${getStatusMessage(status)}</span>
                    </div>
                    ${timing ? `<div class="response-meta-item">
                        <span>${timing < 500 ? 'âš¡' : timing < 2000 ? 'ðŸƒ' : 'ðŸŒ'}</span>
                        <span>${timing}ms</span>
                    </div>` : ''}
                </div>
            `;
            responseContent.appendChild(statusSection);
            
            // Data section
            const dataSection = document.createElement('div');
            dataSection.className = 'response-section';
            dataSection.innerHTML = `
                <h4>ðŸ“¦ Response Data</h4>
                <div class="response-data-container">
                    <div class="response-data-header">JSON Response</div>
                    <div class="response-data">${typeof response.data === 'object' ? JSON.stringify(response.data, null, 2) : response.data}</div>
                </div>
            `;
            responseContent.appendChild(dataSection);
            
            // Clear and update response area
            responseArea.innerHTML = '';
            responseArea.appendChild(responseContent);
            responseArea.scrollTop = 0;
        }

        function displayCollaborativeResponse(response, userName, method, hostname) {
            const responseArea = document.getElementById('responseArea');
            const status = response.status;
            const isSuccess = status >= 200 && status < 300;
            
            const statusEmoji = isSuccess ? 'ðŸŽ‰' : 'ðŸ˜…';
            
            // Create structured response content
            const responseContent = document.createElement('div');
            responseContent.className = 'response-content';
            
            // Collaborative header
            const collabHeader = document.createElement('div');
            collabHeader.className = 'collaborative-response-header';
            collabHeader.innerHTML = `
                <div class="user-info">ðŸ‘¥ Shared Response from ${userName}</div>
                <div class="request-info">ðŸš€ ${method} request to ${hostname}</div>
            `;
            responseContent.appendChild(collabHeader);
            
            // Status section
            const statusSection = document.createElement('div');
            statusSection.className = 'response-section';
            statusSection.innerHTML = `
                <h4>ðŸ“Š Response Status</h4>
                <div class="response-meta">
                    <div class="response-meta-item">
                        <span>${statusEmoji}</span>
                        <span>${status} - ${getStatusMessage(status)}</span>
                    </div>
                    ${response.responseTime ? `<div class="response-meta-item">
                        <span>${response.responseTime < 500 ? 'âš¡' : response.responseTime < 2000 ? 'ðŸƒ' : 'ðŸŒ'}</span>
                        <span>${response.responseTime}ms</span>
                    </div>` : ''}
                </div>
            `;
            responseContent.appendChild(statusSection);
            
            // Data section
            const dataSection = document.createElement('div');
            dataSection.className = 'response-section';
            dataSection.innerHTML = `
                <h4>ðŸ“¦ Response Data</h4>
                <div class="response-data-container">
                    <div class="response-data-header">JSON Response</div>
                    <div class="response-data">${typeof response.data === 'object' ? JSON.stringify(response.data, null, 2) : response.data}</div>
                </div>
            `;
            responseContent.appendChild(dataSection);
            
            // Clear and update response area
            responseArea.innerHTML = '';
            responseArea.appendChild(responseContent);
            responseArea.scrollTop = 0;
        }

        function displayError(error, friendlyMessage) {
            const responseArea = document.getElementById('responseArea');
            
            // Create structured error content with friendly styling
            const responseContent = document.createElement('div');
            responseContent.className = 'response-content';
            
            // Error section with friendly error styling
            const errorSection = document.createElement('div');
            errorSection.className = 'response-section friendly-error';
            errorSection.innerHTML = `
                <div class="error-title">ðŸ˜… Oops! Something Went Wrong</div>
                <div class="playground-metaphor">
                    <div class="metaphor-title">ðŸ° What happened?</div>
                    <div class="metaphor-explanation">${friendlyMessage || 'The API had a little hiccup! It\'s like when a toy doesn\'t work as expected - sometimes these things happen and that\'s totally okay!'}</div>
                </div>
                
                <div class="response-data-container">
                    <div class="response-data-header">Technical Details (for grown-ups)</div>
                    <div class="response-data code-text">${error}</div>
                </div>
                
                <div class="instruction-text">
                    <strong>ðŸ’¡ Let's try these steps:</strong>
                    <ul style="margin-left: 20px; margin-top: 8px;">
                        <li>ðŸ” Check if the URL looks right</li>
                        <li>ðŸ“¶ Make sure your internet is working</li>
                        <li>ðŸŽ¯ Try one of our example APIs instead</li>
                        <li>ðŸ¤” Ask a grown-up for help if you need it</li>
                    </ul>
                </div>
            `;
            responseContent.appendChild(errorSection);
            
            // Clear and update response area
            responseArea.innerHTML = '';
            responseArea.appendChild(responseContent);
        }

        function loadQuickExample(url) {
            document.getElementById('urlInput').value = url;
            
            // Set method to GET for all quick examples
            document.querySelectorAll('.method-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.method === 'GET') {
                    btn.classList.add('active');
                }
            });
            currentMethod = 'GET';
            
            // Show feedback
            const apiName = url.includes('joke') ? 'Random Joke' : 
                           url.includes('catfact') ? 'Cat Fact' : 
                           url.includes('quotable') ? 'Random Quote' : 'API';
            
            showUserFeedback(`ðŸŽ¯ Loaded ${apiName} API! Click "Launch Request!" to try it!`);
            
            if (currentUser) {
                addActivity(`ðŸ“š ${currentUser} loaded ${apiName} API from quick examples!`);
            }
        }

        function getStatusMessage(status) {
            const messages = {
                200: 'Perfect! Everything worked great!',
                201: 'Created! Something new was made!',
                400: 'Bad request - something was confusing',
                401: 'Need permission - like needing a key',
                404: 'Not found - like looking for a toy that\'s not there',
                500: 'Server error - the computer had a hiccup'
            };
            return messages[status] || 'Something happened!';
        }

        function addHeader() {
            const headersSection = document.getElementById('headersSection');
            const headerRow = document.createElement('div');
            headerRow.className = 'header-row';
            headerRow.innerHTML = `
                <input type="text" class="header-input" placeholder="Header name">
                <input type="text" class="header-input" placeholder="Header value">
                <button class="remove-btn" onclick="removeHeader(this)">Ã—</button>
            `;
            headersSection.appendChild(headerRow);
        }

        function removeHeader(button) {
            button.parentElement.remove();
        }

        function updateUsername() {
            const newUsername = document.getElementById('usernameInput').value.trim();
            if (!newUsername) {
                // If empty, show not registered state
                isUserRegistered = false;
                clearSavedUsername(); // Remove from localStorage
                updateUserRegistrationStatus();
                return;
            }

            if (newUsername && newUsername !== currentUser) {
                const oldUsername = currentUser;
                currentUser = newUsername;
                isUserRegistered = true;
                
                // Save to localStorage
                saveUsername(currentUser);
                
                // Show immediate feedback
                showUserFeedback(`ðŸŽ‰ Welcome ${currentUser}! You're now part of the playground!`);
                
                if (isConnected) {
                    sendMessage({
                        type: 'join',
                        username: currentUser
                    });
                    
                    // Add to activity immediately for instant feedback
                    addActivity(`ðŸ‘‹ ${currentUser} joined the playground!`);
                }
                
                updateUserRegistrationStatus();
            }
        }

        function changeUser() {
            // Clear current user and allow changing
            const usernameInput = document.getElementById('usernameInput');
            usernameInput.value = '';
            usernameInput.disabled = false;
            usernameInput.focus();
            
            // Reset state
            currentUser = null;
            isUserRegistered = false;
            clearSavedUsername();
            
            // Hide change button
            document.getElementById('changeUserBtn').style.display = 'none';
            
            // Update UI
            updateUserRegistrationStatus();
            
            showUserFeedback('ðŸ‘‹ Enter a new name to join the playground!');
        }

        function updateOnlineUsers(users) {
            const usersOnline = document.getElementById('usersOnline');
            usersOnline.innerHTML = '';
            
            if (!isUserRegistered || !currentUser) {
                // Show not registered state with wooden background
                const notRegisteredBadge = document.createElement('div');
                notRegisteredBadge.className = 'user-badge wooden-prompt-badge';
                notRegisteredBadge.innerHTML = 'Enter your name above to join!';
                usersOnline.appendChild(notRegisteredBadge);
                return;
            }
            
            if (users && users.length > 0) {
                users.forEach(user => {
                    const userBadge = document.createElement('div');
                    userBadge.className = 'user-badge';
                    userBadge.innerHTML = `${user}`;
                    usersOnline.appendChild(userBadge);
                });
            } else {
                // Show current user at least
                const userBadge = document.createElement('div');
                userBadge.className = 'user-badge';
                userBadge.innerHTML = `${currentUser} (you)`;
                usersOnline.appendChild(userBadge);
            }
        }

        function updateUserRegistrationStatus() {
            updateOnlineUsers(); // Update the users display
            
            // Enable/disable send button based on registration
            const sendBtn = document.getElementById('sendBtn');
            const changeUserBtn = document.getElementById('changeUserBtn');
            
            if (isUserRegistered && currentUser) {
                sendBtn.disabled = false;
                sendBtn.style.opacity = '1';
                changeUserBtn.style.display = 'inline-block'; // Show change button when registered
            } else {
                sendBtn.disabled = true;
                sendBtn.style.opacity = '0.6';
                changeUserBtn.style.display = 'none'; // Hide change button when not registered
            }
        }

        function showUserFeedback(message) {
            // Create a temporary feedback message
            const feedback = document.createElement('div');
            feedback.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
                color: white;
                padding: 20px 30px;
                border-radius: 20px;
                font-size: 1.2em;
                font-weight: bold;
                z-index: 10000;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                animation: bounceIn 0.5s ease-out;
            `;
            feedback.textContent = message;
            
            // Add bounce animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes bounceIn {
                    0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
                    50% { transform: translate(-50%, -50%) scale(1.05); }
                    70% { transform: translate(-50%, -50%) scale(0.9); }
                    100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(feedback);
            
            // Remove after 3 seconds
            setTimeout(() => {
                feedback.style.animation = 'fadeOut 0.5s ease-out';
                setTimeout(() => {
                    if (feedback.parentNode) {
                        feedback.parentNode.removeChild(feedback);
                    }
                }, 500);
            }, 2500);
        }

        function addActivity(activity) {
            const activityFeed = document.getElementById('activityFeed');
            const activityItem = document.createElement('div');
            activityItem.className = 'activity-item';
            activityItem.textContent = activity;
            
            activityFeed.insertBefore(activityItem, activityFeed.firstChild);
            
            // Keep only last 10 activities
            while (activityFeed.children.length > 10) {
                activityFeed.removeChild(activityFeed.lastChild);
            }
        }

        function updateConnectionStatus(status) {
            const statusElement = document.getElementById('connectionStatus');
            
            switch (status) {
                case 'connected':
                    statusElement.className = 'connection-status connected';
                    statusElement.innerHTML = 'ðŸŸ¢ Connected to playground!';
                    break;
                case 'disconnected':
                    statusElement.className = 'connection-status disconnected';
                    statusElement.innerHTML = 'ðŸ”´ Disconnected - trying to reconnect...';
                    break;
                case 'connecting':
                    statusElement.className = 'connection-status';
                    statusElement.innerHTML = '<span class="loading"></span> Connecting...';
                    break;
                case 'error':
                    statusElement.className = 'connection-status disconnected';
                    statusElement.innerHTML = 'âš ï¸ Connection error - retrying...';
                    break;
            }
        }

        function loadExampleCollection() {
            // Load some fun example requests
            const examples = [
                {
                    name: 'ðŸ• Random Dog Picture',
                    url: 'https://dog.ceo/api/breeds/image/random',
                    method: 'GET'
                },
                {
                    name: 'ðŸ˜‚ Random Joke',
                    url: 'https://official-joke-api.appspot.com/random_joke',
                    method: 'GET'
                },
                {
                    name: 'ðŸ± Cat Fact',
                    url: 'https://catfact.ninja/fact',
                    method: 'GET'
                }
            ];

            const randomExample = examples[Math.floor(Math.random() * examples.length)];
            
            document.getElementById('urlInput').value = randomExample.url;
            
            // Update method
            document.querySelectorAll('.method-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.method === randomExample.method) {
                    btn.classList.add('active');
                }
            });
            currentMethod = randomExample.method;
            
            addActivity(`ðŸ“š ${currentUser} loaded "${randomExample.name}" from the example collection!`);
            
            alert(`ðŸŽ‰ Loaded "${randomExample.name}"! Click "Launch Request!" to try it out!`);
        }

        // Fun easter eggs and interactions
        document.addEventListener('keydown', function(e) {
            // Konami code easter egg
            if (e.ctrlKey && e.shiftKey && e.key === 'F') {
                document.body.style.filter = 'hue-rotate(180deg)';
                addActivity('ðŸŒˆ Someone discovered the rainbow mode!');
                setTimeout(() => {
                    document.body.style.filter = '';
                }, 3000);
            }
            
            // Day/Night cycle toggle
            if (e.ctrlKey && e.shiftKey && e.key === 'N') {
                document.body.classList.toggle('night-mode');
                const isNight = document.body.classList.contains('night-mode');
                addActivity(`ðŸŒ™ ${isNight ? 'Night' : 'Day'} mode activated!`);
                showUserFeedback(`ðŸŒ™ Switched to ${isNight ? 'Night' : 'Day'} mode!`);
            }
        });

        // Grass hover interaction
        document.addEventListener('mousemove', function(e) {
            if (e.clientY > window.innerHeight - 150) {
                // Mouse is near the grass area
                const grassElements = document.querySelectorAll('.flower');
                grassElements.forEach((flower, index) => {
                    const delay = index * 100;
                    setTimeout(() => {
                        flower.style.transform = 'translateY(-5px) scale(1.2)';
                        setTimeout(() => {
                            flower.style.transform = '';
                        }, 300);
                    }, delay);
                });
            }
        });

        // Auto-focus username input when page loads
        setTimeout(() => {
            document.getElementById('usernameInput').focus();
        }, 1000);

        // Tab switching functionality
        function switchTab(tabId) {
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked tab button
            document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabId).classList.add('active');
        }
        
        // ===== OPTIMIZED ANIMATION FUNCTIONS =====
        // Reduced particle count and simplified animations for better performance
        
        function createSuccessParticles() {
            // Check if user prefers reduced motion
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                return; // Skip animation
            }
            
            const particlesContainer = document.createElement('div');
            particlesContainer.className = 'success-particles';
            document.body.appendChild(particlesContainer);
            
            // Reduced from 20 to 12 particles for better performance
            for (let i = 0; i < 12; i++) {
                const particle = document.createElement('div');
                particle.className = 'success-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 1.5 + 's';
                particlesContainer.appendChild(particle);
            }
            
            // Cleanup after animation
            setTimeout(() => {
                if (particlesContainer.parentNode) {
                    particlesContainer.parentNode.removeChild(particlesContainer);
                }
            }, 2500);
        }
        
        function createConfetti() {
            // Check if user prefers reduced motion
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                return; // Skip animation
            }
            
            const confettiContainer = document.createElement('div');
            confettiContainer.className = 'confetti-container';
            document.body.appendChild(confettiContainer);
            
            // Reduced from 50 to 25 confetti pieces for better performance
            for (let i = 0; i < 25; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                confetti.style.animationDuration = (Math.random() * 1 + 2) + 's';
                confettiContainer.appendChild(confetti);
            }
            
            // Cleanup after animation
            setTimeout(() => {
                if (confettiContainer.parentNode) {
                    confettiContainer.parentNode.removeChild(confettiContainer);
                }
            }, 3500);
        }
        
        function createBalloons() {
            // Check if user prefers reduced motion
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                return; // Skip animation
            }
            
            const balloonColors = ['var(--slide-red)', 'var(--sandbox-yellow)', 'var(--grass-green)', '#9c27b0'];
            
            balloonColors.forEach((color, index) => {
                const balloon = document.createElement('div');
                balloon.className = `balloon balloon-${index + 1}`;
                balloon.style.background = color;
                balloon.style.left = (15 + index * 20) + '%';
                balloon.style.animationDelay = (index * 0.3) + 's';
                document.body.appendChild(balloon);
                
                // Cleanup after animation
                setTimeout(() => {
                    if (balloon.parentNode) {
                        balloon.parentNode.removeChild(balloon);
                    }
                }, 3500 + (index * 300));
            });
        }
        
        function triggerBirdChirp() {
            // Check if user prefers reduced motion
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                return; // Skip animation
            }
            
            const birdChirp = document.getElementById('birdChirp');
            birdChirp.classList.add('active');
            
            setTimeout(() => {
                birdChirp.classList.remove('active');
            }, 1500);
        }
        
        // ===== PERFORMANCE OPTIMIZATION FUNCTIONS =====
        
        // Throttle function for performance-critical events
        function throttle(func, limit) {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            }
        }
        
        // Debounce function for input events
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // Optimized animation state management
        let animationQueue = [];
        let isAnimating = false;
        
        function queueAnimation(animationFunction) {
            animationQueue.push(animationFunction);
            if (!isAnimating) {
                processAnimationQueue();
            }
        }
        
        function processAnimationQueue() {
            if (animationQueue.length === 0) {
                isAnimating = false;
                return;
            }
            
            isAnimating = true;
            const nextAnimation = animationQueue.shift();
            nextAnimation();
            
            // Process next animation after a short delay to prevent overwhelming
            setTimeout(processAnimationQueue, 100);
        }
        
        // Enhanced feedback system with reduced cognitive load
        function showOptimizedFeedback(message, type = 'info') {
            // Check if user prefers reduced motion for alternative feedback
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            
            const feedback = document.createElement('div');
            feedback.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? 'linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%)' : 
                           type === 'error' ? 'linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)' : 
                           'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'};
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                font-size: 1rem;
                font-weight: 600;
                z-index: 10000;
                box-shadow: 0 8px 24px rgba(0,0,0,0.15);
                max-width: 300px;
                word-wrap: break-word;
                ${prefersReducedMotion ? 'transform: translateX(0);' : 'transform: translateX(100%); transition: transform 0.3s ease-out;'}
            `;
            feedback.textContent = message;
            
            document.body.appendChild(feedback);
            
            // Animate in
            if (!prefersReducedMotion) {
                requestAnimationFrame(() => {
                    feedback.style.transform = 'translateX(0)';
                });
            }
            
            // Remove after delay
            setTimeout(() => {
                if (prefersReducedMotion) {
                    feedback.remove();
                } else {
                    feedback.style.transform = 'translateX(100%)';
                    setTimeout(() => feedback.remove(), 300);
                }
            }, 3000);
        }
        
        // Enhanced micro-interaction system
        function addMicroInteraction(element, type = 'bounce') {
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                // Provide alternative feedback for reduced motion
                element.style.outline = '2px solid var(--playground-red)';
                element.style.outlineOffset = '2px';
                setTimeout(() => {
                    element.style.outline = '';
                    element.style.outlineOffset = '';
                }, 200);
                return;
            }
            
            element.style.transform = type === 'bounce' ? 'scale(0.95)' : 
                                    type === 'shake' ? 'translateX(-2px)' : 
                                    'translateY(-2px)';
            
            setTimeout(() => {
                element.style.transform = type === 'bounce' ? 'scale(1.02)' : 
                                        type === 'shake' ? 'translateX(2px)' : 
                                        'translateY(0px)';
                
                setTimeout(() => {
                    element.style.transform = '';
                }, 100);
            }, 100);
        }
    </script>
</body>
</html>
